name: Osibusi biraz IPTV Otomatik

on:
  schedule:
    - cron: "0 */3 * * *" # Her 3 saatte bir otomatik çalışır
  workflow_dispatch: # Manuel çalıştırma seçeneği

jobs:
  run-osibusi:
    runs-on: ubuntu-latest

    steps:
      - name: 📦 Repo'yu Klonla
        uses: actions/checkout@v4

      - name: 🐍 Python Kur
        uses: actions/setup-python@v5
        with:
          python-version: "3.x"

      - name: 🔧 Bağımlılıkları Kur
        run: |
          echo "📦 Bağımlılıklar kuruluyor..."
          pip install --upgrade pip
          pip install requests httpx

      - name: ▶️ OSIBUSI Script Çalıştır
        run: |
          echo "🚀 biraz.py çalıştırılıyor..."
          python biraz.py || (echo "❌ Python script hata verdi!" && exit 1)
          echo "✅ Script başarıyla tamamlandı."
          echo "📁 Çıktı dosyaları:"
          ls -lh *.m3u || true

      - name: 💾 Değişiklikleri Git'e Ekle ve Push Et
        run: |
          echo "🔧 Git yapılandırması yapılıyor..."
          git config --global user.name "github-actions[bot]"
          git config --global user.email "github-actions[bot]@users.noreply.github.com"

          echo "💾 Değişiklikler hazırl
